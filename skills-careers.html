<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Skills ↔ Careers Concept Browser</title>
<meta name="description" content="Explore how skills map to careers—and careers to required skills—using an interactive D3 concept browser." />
<style>
  :root{
    --bg:#faf8f6; --card:#ffffff; --ink:#2b2622; --muted:#6e635b;
    --edge:#c7bdb6; --accent:#c2956b; --dim:#d9d3cd;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  header{padding:14px 16px;border-bottom:3px solid var(--accent);background:linear-gradient(135deg,#fff,var(--bg))}
  .wrap{max-width:1100px;margin:0 auto;padding:12px 16px 24px}
  h1{margin:0 0 4px 0;font-size:22px}
  .muted{color:var(--muted);font-size:14px}
  .controls{display:flex;flex-wrap:wrap;gap:10px;margin:12px 0}
  .control{background:var(--card);border:1px solid #e6ded7;border-radius:10px;padding:10px 12px;display:flex;gap:8px;align-items:center}
  input[type="text"]{border:1px solid #dfd6cf;border-radius:8px;padding:8px 10px;min-width:230px}
  button{border:none;border-radius:10px;padding:8px 12px;background:#3f342d;color:#fff;cursor:pointer}
  button.alt{background:#e9e1da;color:#3f342d}
  .legend{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .gkey{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border:1px solid #e6ded7;border-radius:999px;background:#fff;font-size:12px}
  .dot{width:10px;height:10px;border-radius:50%}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:900px){.grid{grid-template-columns: 2fr 1fr}}
  .panel{background:var(--card);border:1px solid #e6ded7;border-radius:14px;padding:12px}
  #viz{width:100%;height:70vh}
  .hint{font-size:12px;color:var(--muted);margin-top:6px}
  .pill{display:inline-block;background:#f1e7de;color:#5a4638;border:1px solid #eadfd7;padding:3px 8px;border-radius:999px;font-size:12px}
  .badge{font-size:11px;color:#5a4638;background:#f6efe9;border:1px solid #e7ddd4;border-radius:6px;padding:2px 6px;margin-left:6px}
  footer{margin-top:18px;color:var(--muted);font-size:12px}
  .link{stroke:var(--edge);stroke-opacity:.6}
  .node circle{stroke:#fff;stroke-width:1.5px}
  .node text{font-size:12px;pointer-events:none}
  .dimmed{opacity:.15}
  .highlight{stroke:#000;stroke-width:2.2px}
  .tooltip{
    position:fixed; pointer-events:none; background:#fff; border:1px solid #e6ded7;
    padding:6px 8px; border-radius:8px; font-size:12px; color:#3a312c; box-shadow:0 2px 8px rgba(0,0,0,.05)
  }
  .stack{display:flex;flex-direction:column;gap:8px}
  .learn-list li{margin:6px 0}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Skills ↔ Careers Concept Browser</h1>
    <div class="muted">Click a node to highlight related items. Weighted links show stronger relationships. Colors indicate groups. When you select a career, you’ll get a suggested learning path (top 5 skills).</div>
  </div>
</header>

<main class="wrap grid">
  <section class="panel">
    <div id="viz" role="img" aria-label="Force-directed graph showing skills and careers"></div>
    <div class="hint">Tip: Click a node to focus; click empty space to reset. Drag nodes to re-arrange. Zoom with mousewheel / pinch.</div>
  </section>

  <aside class="panel">
    <div class="stack">
      <div class="controls">
        <div class="control">
          <input id="search" type="text" placeholder="Search skill or career…" />
          <button id="btnSearch">Search</button>
          <button id="btnClear" class="alt">Clear</button>
        </div>
      </div>

      <div class="control legend" id="legend"></div>

      <div class="controls">
        <div class="control">
          <button class="alt" data-filter="all">Show All</button>
          <button class="alt" data-filter="skills">Only Skills</button>
          <button class="alt" data-filter="careers">Only Careers</button>
        </div>
        <div class="control">
          <label><input type="checkbox" id="focusMode"> Focus mode (dim others)</label>
        </div>
      </div>

      <div class="control" style="flex-direction:column;align-items:flex-start">
        <div class="pill">Selection</div>
        <div id="selection" class="hint" style="margin-top:6px">None</div>
        <div id="neighbors"></div>
      </div>

      <div class="control" style="flex-direction:column;align-items:flex-start">
        <div class="pill">Suggested Learning Path</div>
        <div class="hint">Appears when you select a <b>career</b>. Ranked by (link weight × skill connectivity).</div>
        <ol id="learnPath" class="learn-list"></ol>
      </div>

      <div class="control" style="flex-direction:column;align-items:flex-start">
        <div class="pill">About the Data</div>
        <p class="hint">Edit the <code>DATA</code> array to add groups, nodes, and weighted links. Nodes support <code>type</code> ("skill"|"career") and <code>group</code> (e.g., "Frontend"). Links use <code>weight</code> (1..5).</p>
      </div>
    </div>
  </aside>
</main>

<footer class="wrap">
  Built with D3. No tracking. Static page.
</footer>

<script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
<script>
/* ========= Editable Data =========
   - Node: { id, type: "skill"|"career", group: "Frontend"|"Data"|"Cloud"|... }
   - Link: { source, target, weight }  // weight controls thickness (1..5 typical)
*/
const DATA = {
  nodes: [
    // Skills (with groups)
    { id:"Python", type:"skill", group:"Data" },
    { id:"JavaScript", type:"skill", group:"Frontend" },
    { id:"React", type:"skill", group:"Frontend" },
    { id:"SQL", type:"skill", group:"Data" },
    { id:"Data Visualization", type:"skill", group:"Data" },
    { id:"Git & GitHub", type:"skill", group:"Core" },
    { id:"APIs & REST", type:"skill", group:"Core" },
    { id:"Accessibility (WCAG)", type:"skill", group:"Frontend" },
    { id:"Jira/Confluence", type:"skill", group:"Product" },
    { id:"Testing (Pytest/JUnit)", type:"skill", group:"Quality" },
    { id:"Docker", type:"skill", group:"Cloud" },
    { id:"Cloud Basics (AWS/Azure)", type:"skill", group:"Cloud" },
    { id:"Figma", type:"skill", group:"Product" },
    { id:"User Research", type:"skill", group:"Product" },
    { id:"Storytelling (Portfolio)", type:"skill", group:"Product" },

    // Careers (with groups)
    { id:"Frontend Developer", type:"career", group:"Frontend" },
    { id:"Backend Developer", type:"career", group:"Cloud" },
    { id:"Full-stack Developer", type:"career", group:"Core" },
    { id:"Data Analyst", type:"career", group:"Data" },
    { id:"QA / Tester", type:"career", group:"Quality" },
    { id:"Business Systems Analyst", type:"career", group:"Product" },
    { id:"UX/UI Designer", type:"career", group:"Product" },
    { id:"ML Engineer", type:"career", group:"Data" }
  ],
  links: [
    // Dev paths (weights: 1=weak, 3=medium, 5=strong)
    { source:"JavaScript", target:"Frontend Developer", weight:5 },
    { source:"React", target:"Frontend Developer", weight:5 },
    { source:"Accessibility (WCAG)", target:"Frontend Developer", weight:3 },
    { source:"APIs & REST", target:"Frontend Developer", weight:3 },
    { source:"Git & GitHub", target:"Frontend Developer", weight:3 },

    { source:"Python", target:"Backend Developer", weight:4 },
    { source:"APIs & REST", target:"Backend Developer", weight:4 },
    { source:"SQL", target:"Backend Developer", weight:3 },
    { source:"Docker", target:"Backend Developer", weight:3 },
    { source:"Cloud Basics (AWS/Azure)", target:"Backend Developer", weight:3 },
    { source:"Git & GitHub", target:"Backend Developer", weight:3 },

    { source:"JavaScript", target:"Full-stack Developer", weight:4 },
    { source:"React", target:"Full-stack Developer", weight:4 },
    { source:"Python", target:"Full-stack Developer", weight:3 },
    { source:"APIs & REST", target:"Full-stack Developer", weight:4 },
    { source:"SQL", target:"Full-stack Developer", weight:2 },
    { source:"Docker", target:"Full-stack Developer", weight:2 },

    // Data
    { source:"Python", target:"Data Analyst", weight:4 },
    { source:"SQL", target:"Data Analyst", weight:5 },
    { source:"Data Visualization", target:"Data Analyst", weight:5 },
    { source:"Storytelling (Portfolio)", target:"Data Analyst", weight:3 },
    { source:"Jira/Confluence", target:"Data Analyst", weight:2 },

    // QA
    { source:"Testing (Pytest/JUnit)", target:"QA / Tester", weight:5 },
    { source:"APIs & REST", target:"QA / Tester", weight:3 },
    { source:"Jira/Confluence", target:"QA / Tester", weight:4 },
    { source:"Git & GitHub", target:"QA / Tester", weight:3 },

    // BSA
    { source:"Jira/Confluence", target:"Business Systems Analyst", weight:5 },
    { source:"Storytelling (Portfolio)", target:"Business Systems Analyst", weight:4 },
    { source:"APIs & REST", target:"Business Systems Analyst", weight:3 },
    { source:"SQL", target:"Business Systems Analyst", weight:3 },

    // Design
    { source:"Figma", target:"UX/UI Designer", weight:5 },
    { source:"User Research", target:"UX/UI Designer", weight:5 },
    { source:"Accessibility (WCAG)", target:"UX/UI Designer", weight:3 },
    { source:"Storytelling (Portfolio)", target:"UX/UI Designer", weight:4 },

    // ML Eng
    { source:"Python", target:"ML Engineer", weight:5 },
    { source:"SQL", target:"ML Engineer", weight:4 },
    { source:"Docker", target:"ML Engineer", weight:4 },
    { source:"Cloud Basics (AWS/Azure)", target:"ML Engineer", weight:4 },
    { source:"Testing (Pytest/JUnit)", target:"ML Engineer", weight:3 }
  ]
};

/* ========= Colors by Group ========= */
const GROUP_COLORS = d3.scaleOrdinal()
  .domain([...new Set(DATA.nodes.map(n => n.group))])
  .range(["#1565c0","#2e7d32","#8e24aa","#ef6c00","#00897b","#5d4037","#c62828","#6d4c41"]);

/* ========= Legend ========= */
function renderLegend() {
  const cont = d3.select("#legend");
  const groups = GROUP_COLORS.domain();
  groups.forEach(g=>{
    const div = cont.append("span").attr("class","gkey");
    div.append("span").attr("class","dot").style("background", GROUP_COLORS(g));
    div.append("span").text(g);
  });
}

/* ========= Graph ========= */
const W = document.getElementById('viz').clientWidth;
const H = document.getElementById('viz').clientHeight;
const svg = d3.select('#viz').append('svg').attr('width', W).attr('height', H);

const zoom = d3.zoom().scaleExtent([0.3, 3]).on('zoom', (e)=> g.attr('transform', e.transform));
svg.call(zoom);

const g = svg.append('g');
const linkLayer = g.append('g').attr('stroke-linecap','round');
const nodeLayer = g.append('g');

const linkSel = linkLayer.selectAll('.link')
  .data(DATA.links)
  .enter().append('line')
  .attr('class','link')
  .attr('stroke-width', d => 0.6 + d.weight * 1.2); // weighted thickness

const nodeSel = nodeLayer.selectAll('.node')
  .data(DATA.nodes)
  .enter().append('g')
  .attr('class','node')
  .call(d3.drag()
    .on('start', dragstarted)
    .on('drag', dragged)
    .on('end', dragended));

nodeSel.append('circle')
  .attr('r', d => d.type === 'career' ? 12 : 9)
  .attr('fill', d => GROUP_COLORS(d.group));

nodeSel.append('text')
  .attr('x', d => d.type === 'career' ? 14 : 12)
  .attr('y', 4)
  .text(d => d.id);

const sim = d3.forceSimulation(DATA.nodes)
  .force('link', d3.forceLink(DATA.links).id(d => d.id).distance(d => 110 - (d.weight*5)).strength(d => 0.4 + d.weight*0.06))
  .force('charge', d3.forceManyBody().strength(-320))
  .force('center', d3.forceCenter(W/2, H/2))
  .force('collision', d3.forceCollide().radius(30));

sim.on('tick', ()=>{
  linkSel
    .attr('x1', d => d.source.x).attr('y1', d => d.source.y)
    .attr('x2', d => d.target.x).attr('y2', d => d.target.y);
  nodeSel.attr('transform', d => `translate(${d.x},${d.y})`);
});

/* Tooltip */
const tip = d3.select('body').append('div').attr('class','tooltip').style('opacity',0);
nodeSel.on('mouseover', (e,d)=>{
  tip.style('opacity',1).html(`<b>${d.id}</b><br>${d.type === 'skill' ? 'Skill' : 'Career'} • ${d.group}`);
}).on('mousemove', (e)=>{
  tip.style('left', (e.clientX+12)+'px').style('top', (e.clientY+12)+'px');
}).on('mouseout', ()=> tip.style('opacity',0));

/* Neighbor map for highlighting + degree */
const neighbors = {};
const degree = {}; // count of connections per node (for centrality)
DATA.nodes.forEach(n => { neighbors[n.id] = new Set(); degree[n.id] = 0; });
DATA.links.forEach(l=>{
  const s = l.source.id ? l.source.id : l.source;
  const t = l.target.id ? l.target.id : l.target;
  neighbors[s].add(t); neighbors[t].add(s);
  degree[s]++; degree[t]++;
});

let focused = null;
function highlight(id){
  const focusMode = document.getElementById('focusMode').checked;
  focused = id;

  nodeSel.classed('highlight', d => d.id === id)
         .classed('dimmed', d => focusMode && !(d.id === id || neighbors[id]?.has(d.id)));
  linkSel.classed('dimmed', l => focusMode && !(l.source.id===id || l.target.id===id));

  const selDiv = document.getElementById('selection');
  const neighDiv = document.getElementById('neighbors');
  const learnList = document.getElementById('learnPath');

  if(!id){
    selDiv.textContent = 'None';
    neighDiv.innerHTML = '';
    learnList.innerHTML = '';
    return;
  }
  selDiv.innerHTML = `<b>${id}</b>`;

  const list = [...(neighbors[id] || [])].sort().map(n => `<li>${n}</li>`).join('');
  neighDiv.innerHTML = list ? `<ul>${list}</ul>` : `<div class="hint">No direct connections</div>`;

  // Suggested Learning Path (only for careers)
  const node = DATA.nodes.find(n => n.id === id);
  learnList.innerHTML = '';
  if(node && node.type === 'career'){
    // rank neighbor skills: score = linkWeight * degree(skill)
    const items = [];
    (neighbors[id] || []).forEach(nb => {
      const skillNode = DATA.nodes.find(n => n.id === nb);
      if(skillNode && skillNode.type === 'skill'){
        const link = DATA.links.find(l =>
          (l.source.id? l.source.id:l.source) === id && (l.target.id? l.target.id:l.target) === nb ||
          (l.target.id? l.target.id:l.target) === id && (l.source.id? l.source.id:l.source) === nb
        );
        const weight = link ? link.weight : 1;
        const score = weight * (degree[nb] || 1);
        items.push({ skill: nb, weight, deg: degree[nb], score });
      }
    });

    items.sort((a,b) => b.score - a.score);
    const top = items.slice(0,5);
    if(top.length){
      top.forEach(it=>{
        const li = document.createElement('li');
        li.innerHTML = `<b>${it.skill}</b> <span class="badge">score ${it.score}</span> <span class="badge">w${it.weight}</span> <span class="badge">deg ${it.deg}</span>`;
        learnList.appendChild(li);
      });
    } else {
      learnList.innerHTML = `<div class="hint">No linked skills yet—connect some in the data.</div>`;
    }
  }
}

nodeSel.on('click', (_,d)=> highlight(d.id));
svg.on('click', (e)=>{
  if (e.target.tagName === 'svg') highlight(null);
});

/* Filters */
document.querySelectorAll('[data-filter]').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const f = btn.getAttribute('data-filter');
    nodeSel.style('display', d=>{
      if(f==='skills') return d.type==='skill' ? null : 'none';
      if(f==='careers') return d.type==='career' ? null : 'none';
      return null;
    });
    linkSel.style('display', l=>{
      const sVis = nodeVisible(l.source);
      const tVis = nodeVisible(l.target);
      return (sVis && tVis) ? null : 'none';
    });
    function nodeVisible(d){
      const type = d.type || d.source?.type || d.target?.type;
      return (f==='skills' && type==='skill') || (f==='careers' && type==='career') || (f==='all');
    }
  });
});

/* Search */
document.getElementById('btnSearch').addEventListener('click', doSearch);
document.getElementById('btnClear').addEventListener('click', ()=>{
  document.getElementById('search').value=''; highlight(null);
});
document.getElementById('search').addEventListener('keydown', e=>{ if(e.key==='Enter') doSearch(); });

function doSearch(){
  const q = document.getElementById('search').value.trim().toLowerCase();
  if(!q){ highlight(null); return; }
  const n = DATA.nodes.find(n=> n.id.toLowerCase()===q || n.id.toLowerCase().includes(q));
  if(n){
    const t = d3.zoomIdentity.translate(W/2 - n.x*1.2, H/2 - n.y*1.2).scale(1.2);
    svg.transition().duration(400).call(zoom.transform, t);
    highlight(n.id);
  }
}

/* Drag handlers */
function dragstarted(event,d){
  if(!event.active) sim.alphaTarget(0.3).restart();
  d.fx = d.x; d.fy = d.y;
}
function dragged(event,d){
  d.fx = event.x; d.fy = event.y;
}
function dragended(event,d){
  if(!event.active) sim.alphaTarget(0);
  d.fx = null; d.fy = null;
}

/* Resize */
window.addEventListener('resize', ()=>{
  const W2 = document.getElementById('viz').clientWidth;
  const H2 = document.getElementById('viz').clientHeight;
  svg.attr('width', W2).attr('height', H2);
  sim.force('center', d3.forceCenter(W2/2, H2/2)).alpha(0.3).restart();
});

/* Init */
renderLegend();
</script>
</body>
</html>
